import{r as o,R as p,j as e,c as E}from"./styles-8aea9f05.js";const H=i=>{localStorage.setItem("orders",JSON.stringify(i)),window.dispatchEvent(new Event("storage"))},g=()=>{const i=localStorage.getItem("orders");return i?JSON.parse(i):[]},N=[{id:1,orderNumber:"GH1001",customerName:"Luis Robles",address:"123 Main St, NY",orderDetails:"2x 265/70R17 Ridge Grappler",date:"2025-06-14",time:"9:00 AM",ghStatus:"Label no disponible",trottaStatus:"",note:"",unitPrice:50,labels:[]},{id:2,orderNumber:"GH1002",customerName:"Ana GonzÃ¡lez",address:"456 Elm St, NJ",orderDetails:"1x 275/65R18 Michelin Defender",date:"2025-06-14",time:"9:30 AM",ghStatus:"Label no disponible",trottaStatus:"",note:"",unitPrice:60,labels:[]},{id:3,orderNumber:"GH1003",customerName:"Carlos MartÃ­nez",address:"789 Oak St, NY",orderDetails:"4x 245/70R17 Toyo Open Country",date:"2025-06-14",time:"10:00 AM",ghStatus:"Label no disponible",trottaStatus:"",note:"",unitPrice:75,labels:[]},{id:4,orderNumber:"GH1004",customerName:"MarÃ­a LÃ³pez",address:"321 Pine St, NJ",orderDetails:"2x 255/55R20 Pirelli Scorpion",date:"2025-06-14",time:"10:30 AM",ghStatus:"Label disponible",trottaStatus:"",note:"",unitPrice:70,labels:[]},{id:5,orderNumber:"GH1005",customerName:"JosÃ© Rivera",address:"654 Cedar St, NY",orderDetails:"1x 265/75R16 BFGoodrich KO2",date:"2025-06-14",time:"11:00 AM",ghStatus:"Orden cancelado",trottaStatus:"",note:"",unitPrice:85,labels:[]},{id:6,orderNumber:"GH1006",customerName:"Laura GÃ³mez",address:"987 Maple St, NJ",orderDetails:"3x 285/70R17 Goodyear Wrangler",date:"2025-06-14",time:"11:30 AM",ghStatus:"Label no disponible",trottaStatus:"",note:"",unitPrice:90,labels:[]},{id:7,orderNumber:"GH1007",customerName:"Daniel Torres",address:"111 Birch St, NY",orderDetails:"2x 275/60R20 Falken Wildpeak",date:"2025-06-14",time:"12:00 PM",ghStatus:"Label disponible",trottaStatus:"",note:"",unitPrice:78,labels:[]},{id:8,orderNumber:"GH1008",customerName:"Patricia NÃºÃ±ez",address:"222 Walnut St, NJ",orderDetails:"4x 265/70R17 Firestone Destination",date:"2025-06-14",time:"12:30 PM",ghStatus:"Label no disponible",trottaStatus:"",note:"",unitPrice:67,labels:[]},{id:9,orderNumber:"GH1009",customerName:"Miguel Herrera",address:"333 Spruce St, NY",orderDetails:"1x 285/75R16 Cooper Discoverer",date:"2025-06-14",time:"1:00 PM",ghStatus:"Label disponible",trottaStatus:"",note:"",unitPrice:82,labels:[]},{id:10,orderNumber:"GH1010",customerName:"SofÃ­a MÃ©ndez",address:"444 Chestnut St, NJ",orderDetails:"2x 275/55R20 Nitto Terra Grappler",date:"2025-06-14",time:"1:30 PM",ghStatus:"Label no disponible",trottaStatus:"",note:"",unitPrice:88,labels:[]}];function k(){const[i,c]=o.useState(()=>{const t=g();return t.length>0?t:N}),[b,v]=o.useState("Todos"),[m,S]=o.useState({}),[x,j]=o.useState({}),[P,d]=o.useState("Ordenes Trotta");p.useEffect(()=>{const t=setInterval(()=>{const s=g();c(s.length>0?s:N)},2e3);return()=>clearInterval(t)},[]),p.useEffect(()=>{H(i)},[i]);const L=(t,s)=>{c(a=>a.map(n=>n.id===t?{...n,ghStatus:s}:n))},f=t=>S(s=>({...s,[t]:!1})),C=(t,s)=>c(a=>a.map(n=>n.id===t?{...n,note:s}:n)),G=t=>j(s=>({...s,[t]:!1})),O=(t,s)=>{const a=t.match(/^\d+x/);return(a?parseInt(a[0]):1)*s},R=(t,s)=>{const a=s.target.files;if(!a.length)return;const n=[];for(let r=0;r<a.length;r++){const h=a[r];n.push(new Promise(l=>{const u=new FileReader;u.onload=M=>{l({name:h.name,data:M.target.result})},u.readAsDataURL(h)}))}Promise.all(n).then(r=>{c(h=>h.map(l=>{if(l.id===t){const u=l.labels?[...l.labels,...r]:r;return{...l,labels:u}}return l}))})},D=t=>{if(!t.labels||t.labels.length===0){alert(`No hay labels para enviar en la orden ${t.orderNumber}`);return}const s=t.labels.map(a=>a.name).join(", ");alert(`Enviando labels para orden ${t.orderNumber}: ${s}`)},T=b==="Todos"?i:i.filter(t=>t.ghStatus===b);return e.jsxs("div",{className:"admin-container",children:[e.jsxs("div",{className:"sidebar",children:[e.jsx("h2",{children:"GH Tire Panel"}),e.jsxs("ul",{children:[e.jsx("li",{onClick:()=>d("Ordenes Trotta"),children:"Ordenes Trotta"}),e.jsx("li",{onClick:()=>d("Scraper Trotta"),children:"Scraper Trotta"}),e.jsx("li",{onClick:()=>d("ActualizaciÃ³n Inventario"),children:"ActualizaciÃ³n Inventario"}),e.jsx("li",{onClick:()=>d("Reporte de Ventas"),children:"Reporte de Ventas"}),e.jsx("li",{onClick:()=>d("Pagos Pendientes"),children:"Pagos Pendientes"})]})]}),e.jsxs("div",{className:"main-content",children:[e.jsx("h1",{children:"GH Tire House - Panel de AdministraciÃ³n"}),P==="Ordenes Trotta"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"filter-bar",children:[e.jsx("label",{children:"Filtrar por estado:"}),e.jsxs("select",{value:b,onChange:t=>v(t.target.value),children:[e.jsx("option",{value:"Todos",children:"Todos"}),e.jsx("option",{value:"Label no disponible",children:"Label no disponible"}),e.jsx("option",{value:"Label disponible",children:"Label disponible"}),e.jsx("option",{value:"Orden cancelado",children:"Orden cancelado"})]})]}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Orden #"}),e.jsx("th",{children:"Cliente"}),e.jsx("th",{children:"DirecciÃ³n"}),e.jsx("th",{children:"Orden"}),e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Hora"}),e.jsx("th",{children:"Estado GH"}),e.jsx("th",{children:"AcciÃ³n"}),e.jsx("th",{children:"Estado Trotta (Cliente)"}),e.jsx("th",{children:"Notas"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Labels"}),e.jsx("th",{children:e.jsx("button",{onClick:()=>alert("Procesando todos..."),children:"Procesar todos"})})]})}),e.jsx("tbody",{children:T.map(t=>{const s=t.trottaStatus==="Cancelado - Llanta no disponible"?"red":t.trottaStatus==="Listo para recojida"?"green":"inherit";return e.jsxs("tr",{children:[e.jsx("td",{children:t.orderNumber}),e.jsx("td",{children:t.customerName}),e.jsx("td",{children:t.address}),e.jsx("td",{children:t.orderDetails}),e.jsx("td",{children:t.date}),e.jsx("td",{children:t.time}),e.jsx("td",{children:e.jsxs("select",{value:t.ghStatus,onChange:a=>L(t.id,a.target.value),disabled:!m[t.id],children:[e.jsx("option",{value:"Label no disponible",children:"Label no disponible"}),e.jsx("option",{value:"Label disponible",children:"Label disponible"}),e.jsx("option",{value:"Orden cancelado",children:"Orden cancelado"})]})}),e.jsx("td",{children:e.jsx("button",{onClick:()=>m[t.id]?f(t.id):S(a=>({...a,[t.id]:!0})),children:m[t.id]?"Guardar":"Editar"})}),e.jsx("td",{style:{color:s,fontWeight:"bold"},children:t.trottaStatus||"â€”"}),e.jsxs("td",{children:[e.jsx("textarea",{value:t.note,onChange:a=>C(t.id,a.target.value),onDoubleClick:()=>j(a=>({...a,[t.id]:!0})),disabled:!x[t.id],rows:2,style:{width:"100%",resize:"none"}}),e.jsx("button",{onClick:()=>x[t.id]?G(t.id):j(a=>({...a,[t.id]:!0})),children:x[t.id]?"Guardar":"Editar"})]}),e.jsxs("td",{children:["$",O(t.orderDetails,t.unitPrice)]}),e.jsxs("td",{children:[e.jsx("input",{type:"file",accept:".pdf",onChange:a=>R(t.id,a),multiple:!0}),e.jsx("div",{children:t.labels&&t.labels.length>0?t.labels.map((a,n)=>e.jsx("div",{children:e.jsxs("a",{href:a.data,download:a.name,target:"_blank",rel:"noopener noreferrer",children:["ðŸ“¥ ",a.name]})},n)):e.jsx("span",{children:"No hay labels"})})]}),e.jsx("td",{children:e.jsx("button",{onClick:()=>D(t),children:"Enviar Labels"})})]},t.id)})})]})]})]})]})}E.createRoot(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(k,{})}));
